<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Cronología de ideas desordenadas</title><link href="/" rel="alternate"></link><link href="/feeds/all.atom.xml" rel="self"></link><id>/</id><updated>2022-03-08T00:00:00-03:00</updated><entry><title>Privacy and Security low cost</title><link href="/articles/2022/03/08/privacy-low-cost/" rel="alternate"></link><published>2022-03-08T00:00:00-03:00</published><updated>2022-03-08T00:00:00-03:00</updated><author><name>nestornav</name></author><id>tag:None,2022-03-08:/articles/2022/03/08/privacy-low-cost/</id><summary type="html">&lt;p&gt;Nowaday is easy to see news about attacks that have compromised privacy and security from both people and companies. Thanks to the hyperconnectivity that we have and a poor education about security and privacy we do not realize the footprint that we leave while doing our daily actions. Some examples …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nowaday is easy to see news about attacks that have compromised privacy and security from both people and companies. Thanks to the hyperconnectivity that we have and a poor education about security and privacy we do not realize the footprint that we leave while doing our daily actions. Some examples could be when we rent a car and then connect the cell phone by bluethooth. We can synchronize all our contacts to the car without realizing it. Then when we return the car, the next user will have access to all our contacts.&lt;/p&gt;
&lt;p&gt;The idea is to share some tools that will help us to protect our privacy and security in the internet world. Sometimes, we think that to protect ourselves we need to know about computers or invest money. But in this post I will show some free options that will improve our current situation.&lt;/p&gt;
&lt;h2&gt;The hell’s access&lt;/h2&gt;
&lt;h3&gt;Passwords&lt;/h3&gt;
&lt;p&gt;Keeping different passwords is a tough task. Also, you need to change them from time to time. Moreover with the huge amount of accounts we create day to day it is really hard to keep passwords secure and avoid duplicating them.
Finally but not less important several web pages/services were vulnarated by hackers. Getting to uncover our emails and sometimes even our passwords. This situation allows hacker to try in other web pages or services with these credentials creating a net of vulnerabilities. In this way not just our social media can be attacked, but also our home banking account and so on.
You can check if your email has been compromised in the following sites, &lt;a href="https://monitor.firefox.com/"&gt;Mozilla Monitor&lt;/a&gt; and &lt;a href="https://hveibeenpwned.com/"&gt;Pwned&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To solve this problem is as simple as downloading a password generator. This kind of application will create secure and strong passwords and avoid repeating them. From our side we just need to remember one or two strong secure passwords to get access to the application. Then using the application plug-in for the most modern web browser it will suggest auto-fill our credentials into the log-in pages.
I suggest using &lt;a href="https://www.avira.com/en/password-manager"&gt;Avira Password Manager&lt;/a&gt; because you can manage from both our mobile phone (Android, iOS) and laptop all your access. There are other applications that do the same work but they do not provide in the free tier the access to multiple devices at same time. From my point of view, it is a kill breaker feature because we use one or another depending on how we are moving along our day.&lt;/p&gt;
&lt;h3&gt;Two factor authentication (F2A)&lt;/h3&gt;
&lt;p&gt;Nowadays having strong passwords is not enough to keep all our access safe. So we should activate (in pages or services that allow us) the second factor authentication.
This second code is a six digit password that changes periodically and will be requested after logged-in into a web page/service. Also if we want to do some actions inside a web page such as sell some of our crypto.
To register the F2A, the application will scan a QR code with an application destined for that. From this blog we suggest use &lt;a href="https://authy.com/"&gt;Authy&lt;/a&gt; because we can use it from our laptop or mobile device as well as keep all the codes synchronized between them. This is important because if we do not backup the recovery codes (a sheet with one or more codes given after registering the F2A), we will have a last chance to recover all our codes in case of lost or robbery of our personal devices.&lt;/p&gt;
&lt;p&gt;The last advice is &lt;strong&gt;read&lt;/strong&gt; and be &lt;strong&gt;careful&lt;/strong&gt;. Each time a message is prompted, an unknown email takes some time to read and doubt about it. In this way we will know what we are doing and avoid be catched in some threat.&lt;/p&gt;
&lt;h2&gt;Reducing our digital footprint&lt;/h2&gt;
&lt;p&gt;Several times we were talking with friends about a new amazing bike, later we realized that we start seeing bike ads in social media or web browsing. The fact is our devices are listening to us. Also the installed applications that we use on our daily basis are collecting information about  you or where we are moving on.&lt;/p&gt;
&lt;h3&gt;Radical changes&lt;/h3&gt;
&lt;p&gt;Google is the most famous and well known browser for all of us. But it‚Äôs the most intrusive because it records our data such as geo location (then they can suggest posts based on your location), preferences, etc without our consent. We can check this fact in the curated advertising that we will see in web pages or even among our search.
There are other search engine options. In particular the one that I have been using since 13 years ago, it is &lt;a href="https://duckduckgo.com/"&gt;DuckDuckGo&lt;/a&gt;. This engine does not track you and do not save nor sell our data related. Also we will see annoying advertising everywhere. A plus is that DuckDuckGo provides us with some extra commands in the search engine(for example if we put to search “jorge luis borges !w”, the &lt;strong&gt;!w&lt;/strong&gt; command will show us the result in Wikipedia directly). There are several commands waiting for us.&lt;/p&gt;
&lt;p&gt;Another improvement in our browsing is to start using &lt;a href="https://www.eff.org/pages/privacy-badger"&gt;Privacy Badger&lt;/a&gt;. It is a browser extension for all modern web browsers. This plug-in blocks libraries such as Google Analytics or hidden trackers embedded into the web pages. With that we will avoid the tracking and subsequent sale of this data to third-parties.&lt;/p&gt;
&lt;h3&gt;Access validation&lt;/h3&gt;
&lt;p&gt;Each time that we install a new application into our mobiles, they require in some manner to grant access to different mobile resources such as microphone, localization and so on. We should spend some time checking for those permissions that do not need to be accessed all the time and just allow them when we will use the application. Moreover we need to pay attention to those applications that request permission for resources that are not required for their right working. For example a stopwatch does not need access to our contact agenda or location.&lt;/p&gt;
&lt;h3&gt;Smart assistance&lt;/h3&gt;
&lt;p&gt;Finally, all our smartphones provide intelligent assistance that records part of our talks even when we are not using them. Hence we must keep them turned off and just use them when we need.
Below I will share with you how to turn off the assistances for Android and iOS:&lt;/p&gt;
&lt;p&gt;Deactivate "Hey Siri" (iOS):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Configuration &amp;gt; Siri &amp;amp; Search.&lt;/li&gt;
&lt;li&gt;Toggle off "Listen for Hey Siri".&lt;/li&gt;
&lt;li&gt;Toggle off "Allow Siri when Locked".&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Deactivate "Ok Google" (Android):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Go to configuration.&lt;/li&gt;
&lt;li&gt;Google &amp;gt; Account Service &amp;gt; Search, Assistance and Voice &amp;gt; Voice.&lt;/li&gt;
&lt;li&gt;Voice Match and turn off Hey Google.&lt;/li&gt;
&lt;/ul&gt;</content><category term="articles"></category></entry><entry><title>Privacidad y Seguridad low cost</title><link href="/privacy-low-cost-sp.html" rel="alternate"></link><published>2022-03-08T00:00:00-03:00</published><updated>2022-03-08T00:00:00-03:00</updated><author><name>nestornav</name></author><id>tag:None,2022-03-08:/privacy-low-cost-sp.html</id><summary type="html">&lt;p&gt;A diario encontramos noticias sobre ataques que vulneraron de alguna u otra forma la privacidad y seguridad de personas y empresas. Con la hiperconectividad que hoy tenemos y una escasa alfabetización sobre seguridad y privacidad, no percibimos las huellas digitales que dejamos con nuestras actividades diarias. Ejemplos de esto puede …&lt;/p&gt;</summary><content type="html">&lt;p&gt;A diario encontramos noticias sobre ataques que vulneraron de alguna u otra forma la privacidad y seguridad de personas y empresas. Con la hiperconectividad que hoy tenemos y una escasa alfabetización sobre seguridad y privacidad, no percibimos las huellas digitales que dejamos con nuestras actividades diarias. Ejemplos de esto puede ser cuando alquilamos un auto, y conectamos vía bluetooth nuestro celular, si no prestamos atención a la hora de conectarlo, puede que al devolverlo queden registrada nuestra agenda de contactos, y el próximo que alquile el vehículo pueda tener acceso.&lt;/p&gt;
&lt;p&gt;La idea es poder compartir herramientas que nos ayudan a proteger nuestra privacidad y seguridad en el web. Muchas veces, pensamos que para protegernos hay que saber mucho sobre informática o invertir dinero, pero presento algunas opciones que son gratuita y que mejoraran nuestra situación actual.&lt;/p&gt;
&lt;h2&gt;El infierno de los ascesos&lt;/h2&gt;
&lt;h3&gt;Contraseñas&lt;/h3&gt;
&lt;p&gt;Mantener contraseñas distintas es complejo, y mas cuando hay que ir cambiándolas cada cierto periodo de tiempo. Esto, sumado a la cantidad de cuentas que abrimos se hace difícil poder mantener un esquema seguro y sin repetirlas.
Por último, muchas páginas web han sido vulneradas por hackers, quedando expuesto nuestro mail y muchas veces contraseña. Esto permite a quienes han atacado y obtenido nuestros datos probar en distintos servicios web con esas mismas credenciales. De esta forma un atacante puede acceder a múltiples cuentas nuestras incluso aquellas mas sensibles como cuentas bancarias.
Para validar si tu cuenta fue comprometida en alguna de estas páginas, podes utilizar alguna de estas dos páginas &lt;a href="https://monitor.firefox.com/"&gt;Mozilla Monitor&lt;/a&gt; y &lt;a href="https://haveibeenpwned.com/"&gt;Pwned&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Para resolver este problema es tan simple como descargar generador de contraseñas. Esta aplicación, nos va permitir generarlas de manera segura, aleatorias y sin repetirlas. Nosotros solo debemos recordar una o dos contraseñas seguras, que son para el acceso a esta aplicación.  Luego mediante los plug-in que vienen para los navegadores se completarán de forma automática a la hora de querer ingresar a un sitio web.
Sugiero usar &lt;a href="https://www.avira.com/en/password-manager"&gt;Avira Password Manager&lt;/a&gt;, ya que nos permite gestionar tanto desde nuestro dispositivo móvil (androis, iOS), como en el navegador web. Muchas otras aplicaciones no ofrecen en su versión gratuita esta posibilidad. Y en mi opinión es importante, ya que nunca usamos de manera atómica un dispositivo u otro.&lt;/p&gt;
&lt;h3&gt;Segundo factor de autenticación (F2A)&lt;/h3&gt;
&lt;p&gt;Hoy en día contar con contraseñas fuertes, si bien son de mucha ayuda, para mantener un esquema seguro de acceso a nuestras cuentas ya no es suficiente. Es por ello que deberíamos activar, en todos aquellos servicios que nos los permitan, el segundo factor de autenticación.
Este segundo código, es una clave de seis dígitos que se regenera cada cierto tiempo y se nos solicita una vez que hemos hecho log-in en un servicio web, o queremos realizar determinadas acciones dentro de una página web (como autorizar la venta de cripto monedas).
Para registrar  F2A, se nos va solicitar escanear un código QR, con una aplicación que nosotros contemos. Desde este blog, sugerimos utilizar &lt;a href="https://authy.com/"&gt;Authy&lt;/a&gt;, ya que nos permite tener una aplicación en nuestro móvil y computadora personal con todos los códigos sincronizados. Esto es importante, ya que si no tenemos guardado los código de recuperación (una vez generado el código también se genera una hoja con uno o más códigos de recuperación), contamos con una última opción para recuperar nuestros códigos en caso de pérdoda o robo de nuestro el celular.&lt;/p&gt;
&lt;p&gt;El último consejo que quiero ofrecerles es, &lt;strong&gt;leer&lt;/strong&gt; y estar &lt;strong&gt;atentos&lt;/strong&gt;. Cada vez que se nos presente un mensaje, un email desconocido, nos tomemos el tiempo de leer y dudar. Así entenderemos que estamos haciendo, y evitar caer en alguna amenaza.&lt;/p&gt;
&lt;h2&gt;Dejando menos huellas&lt;/h2&gt;
&lt;p&gt;Cuantas veces charlando con un amigo sobrea bicicletas por ejemplo, encontramos mas tardes publicicades sobre bicicletas en redes sociales o buscadores. La realidad, es que nuestros dispositivos nos escuchan, y muchas de las aplicaciones que usamos a diario están recolectando información de nuestras preferencias personales o por donde nos movemos en la web.&lt;/p&gt;
&lt;h3&gt;Cambios radicales&lt;/h3&gt;
&lt;p&gt;Google es el buscador de contenidos mas difundido y conocido por todos. Pero es el mas intrusivo, ya que van registrando información sin tu consetimiento, como ser tu ubicación (por eso sugieren articulos o paginas relacionadas a tu ubicación), preferencias, etc. Esto posteriormente, puede verse por ejemplo en el tipo de publicidades que te ofrecen los sitios webs, incluso entre los resultados de tu búsqueda.
Existen otras opciones de buscadores, pero en particular el que uso desde hace mas de 13 años es &lt;a href="https://duckduckgo.com/"&gt;DuckDuckGo&lt;/a&gt;. Este buscador no solo que no realiza tracking, sino que no guarda ni vende nuestra información. Tampoco veremos publicidades molestas por todos lados. Además que ofrece algunas funcionalidades extras usando algunos comandos especiales a la hora de realizar una búsqueda (por ejemplo si ponemos en el buscado “jorge luis borges !w”, el comando &lt;strong&gt;!w&lt;/strong&gt; hará que nuestra búsqueda salga directamente a Wikipedia).&lt;/p&gt;
&lt;p&gt;Otra mejora que podemos empezar a utilizar es &lt;a href="https://www.eff.org/pages/privacy-badger"&gt;Privacy Badger&lt;/a&gt;, es una extensión para todos los navegadores modernos. Este plug-in bloquea a herramientas como Google Analytics o trackers que están incorporados de forma “secreta” en las páginas wes que utilizamos a diario. Lograremos de esta forma que no se esté registrando y vendiendo información personal a terceras partes.&lt;/p&gt;
&lt;h3&gt;Validando los accesos&lt;/h3&gt;
&lt;p&gt;Cada vez que instalamos una aplicación en nuestros teléfonos móviles, la misma requiere acceso a diferentes recursos de nuestro teléfono como ser el micrófono, ubicación etc. Deberíamos tomarnos el tiempo de quitar o cambiar dichos permisos, para evitar que por defecto tengan acceso a información que no deberían tener todo el tiempo. Así como analizar si por ejemplo descargamos una aplicación que nos sirve de cronómetro, esta no debería porque querer tener acceso a nuestra libreta de contactos o ubicación, ya que no son necesarias para que nos mida el tiempo.&lt;/p&gt;
&lt;h3&gt;Los asistentes inteligentes&lt;/h3&gt;
&lt;p&gt;Por último, los asistentes inteligentes que proveen nuestros teléfonos siguen registrando que hablamos por mas que nosotros no los estemos utilizando. Es por ello que deberíamos tenerlos desactivados y hacer uso de ellos solo cuando los querramos usar.
A continuación mostramos los pasos para desactivar tanto para teléfonos Android o iOS:&lt;/p&gt;
&lt;p&gt;Desactivar “Hey Siri” (iOS):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Configuración &amp;gt; Siri &amp;amp; Búsqueda.&lt;/li&gt;
&lt;li&gt;Apagamos “Escuchar por Hey Siri”.&lt;/li&gt;
&lt;li&gt;Apagamos “Permitir a Siri cuando esté bloqueado".&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Desactivar “Ok Google” (Android):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Vamos a configuración.&lt;/li&gt;
&lt;li&gt;Google &amp;gt; Servicios de cuenta &amp;gt; Búsqueda, Asistente y Voz &amp;gt; Voz.&lt;/li&gt;
&lt;li&gt;Voice Match y apagamos Hey Google.e&lt;/li&gt;
&lt;/ul&gt;</content><category term="articles"></category></entry><entry><title>2021 Latin America Scikit-learn sprint by Data Umbrella</title><link href="/articles/2021/12/06/du-sklearn-sprint/" rel="alternate"></link><published>2021-12-06T00:00:00-03:00</published><updated>2021-12-06T00:00:00-03:00</updated><author><name>nestornav</name></author><id>tag:None,2021-12-06:/articles/2021/12/06/du-sklearn-sprint/</id><summary type="html">&lt;p&gt;I do not remember when I started to be part, but since a friend of mine shared me the open source philosophy and movement I started to be part and collaborate in different ways.
Nowadays I am not an active collaborator for any initiative but I always try to help …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I do not remember when I started to be part, but since a friend of mine shared me the open source philosophy and movement I started to be part and collaborate in different ways.
Nowadays I am not an active collaborator for any initiative but I always try to help when is possible. But this post is not about how I started whit the open source at least not at all.&lt;/p&gt;
&lt;p&gt;In June 2021 I read a tweet from a friend of mine and I figured out two things. First one, there are an organization called &lt;a href="https://www.dataumbrella.org/"&gt;Data Umbrella&lt;/a&gt; (DU aims to create inclusive spaces and share technology knowledge), secondly there was a sprint of Scikit-learn focused in Latin America.  This post will be about the second topic.
Finally I decided to register to the &lt;a href="https://latam2021.dataumbrella.org/"&gt;Data Umbrella:  2021 Latin America scikit-learn open source sprint&lt;/a&gt;.
This not be the first time that I’m involve in this kind of event but the first time ever that I contribute to an important and big library such as scikit-learn.&lt;/p&gt;
&lt;p&gt;In a general view the event was a great experience to interact and meet to core library developers as well as other people in LatAm.
The organization was neat, they have a lot of document and pre work to put your hand on in the event day. Also you have your partner already asigned and a curated list of issue to tackle.
Data Umbrella organization tackle very well the language barrier and that was a plus. All the people involve could gave their part to collaborate in the library.
You do not need to be super smart or an expert in machine learning to help.
All of these points allowed to create an atmosphere in where all of the participant with their time and capacities can bring the best of them and generate a postive impact.&lt;/p&gt;
&lt;p&gt;Although we do not finished our issue (our &lt;a href="https://github.com/scikit-learn/scikit-learn/pull/20424"&gt;PR&lt;/a&gt; is open yet) I will participate in this kind of event again. Moreover I’m thinking in finish the pending requested changes and merge the results.&lt;/p&gt;
&lt;p&gt;This kind of events give us the opportunity to learn something new, expand our knowledge in different areas and finally help to a library that the most of us use in our daily basis.&lt;/p&gt;
&lt;p&gt;If you want to know more about the event and their statistics check this amazing &lt;a href="https://reshamas.github.io/data-umbrella-latam-2021-scikit-learn-sprint-report/"&gt;post sprint report&lt;/a&gt;.&lt;/p&gt;</content><category term="articles"></category></entry><entry><title>Scikit-learn sprint, Latino América 2021 por Data Umbrella</title><link href="/du-sklearn-sprint-sp.html" rel="alternate"></link><published>2021-12-06T00:00:00-03:00</published><updated>2021-12-06T00:00:00-03:00</updated><author><name>nestornav</name></author><id>tag:None,2021-12-06:/du-sklearn-sprint-sp.html</id><summary type="html">&lt;p&gt;No recuerdo cuando empecé a involucrarme, pero desde que me compartieron la filosofía y el movimiento open source, empecé a ser parte cada vez día un poco más y aún hoy sigo tomando parte de esta iniciativa, aunque no siempre con la fuerza que quisiera. En este post no vengo …&lt;/p&gt;</summary><content type="html">&lt;p&gt;No recuerdo cuando empecé a involucrarme, pero desde que me compartieron la filosofía y el movimiento open source, empecé a ser parte cada vez día un poco más y aún hoy sigo tomando parte de esta iniciativa, aunque no siempre con la fuerza que quisiera. En este post no vengo hablar tanto de como comencé o adopté la filosofía open source, o al menos no del todo.&lt;/p&gt;
&lt;p&gt;En Junio de 2021 a través de un tweet de un amigo, me enteré de dos cosas. La primera que existía una organización llamada &lt;a href="https://www.dataumbrella.org/"&gt;Data Umbrella&lt;/a&gt; (DU busca crear espacios inclusivo y compartir conocimientos en tecnología), y que había un sprint para Scikit-learn enfocado en Latino América. En este post voy contar algunas apreciaciones sobre esta última.
Finalmente decid inscribirme a participar de &lt;a href="https://latam2021.dataumbrella.org/"&gt;Data Umbrella:  2021 Latin America scikit-learn open source sprint&lt;/a&gt;. Si bien no era la primera vez vez que aportaba a una librería cerrada o abierta, si fue primera vez que aporté a un proyecto tan grande e importante como scikit-learn. Lo cual me puso muy entusiasmado.&lt;/p&gt;
&lt;p&gt;El evento en general, fue linda experiencia para interactuar y conocer a los core developers de la librería así como también a otras personas dentro de LatAm.
La organización fue muy prolija, ya que contabas con todas las herramientas para poder trabajar el día del evento, tenías tu compañero de trabajo ya asignado y una rápida respuesta a dudas o problemas, así como una lista curada de posibles issues a trabajar. Algo no menor, es que los organizadores hicieron todo lo posible para derribar la barrera del idioma que muchas veces está presente en este tipo de eventos.
Se creo un un espacio donde todos pueden aportar su granito de arena en la librería. No hacía falta ser una persona súper experimentada en programación o machine learning. Esto generó un ambiente inclusivo donde cada cual con sus capacidades y tiempo pudo dar lo mejor de sí y generar un gran impacto colectivo.&lt;/p&gt;
&lt;p&gt;En mi caso, si bien hoy no logramos termina de cerrar la &lt;a href="https://github.com/scikit-learn/scikit-learn/pull/20424"&gt;pull request&lt;/a&gt; que tenemos con mi compañero, volvería a participar del evento incluso fuera de el tomando alguna issue. Inpdendientemente de esto, Aún tengo planeado cerrar las tareas que tengo pendiente, para que ese trabajo quede finalmente mergeado.&lt;/p&gt;
&lt;p&gt;Estos eventos nos dan la oportunidad de aprender algo nuevo, expandir nuestro conocimientos en distintas áreas, conocer personas y finalmente aportar a una librería que usamos en nuestros trabajos día a día.&lt;/p&gt;
&lt;p&gt;Si quieren saber un poco más sobre estadísticas y un reporte detallado sobre el evento, pueden ver este &lt;a href="https://reshamas.github.io/data-umbrella-latam-2021-scikit-learn-sprint-report/"&gt;reporte de sprint&lt;/a&gt;.&lt;/p&gt;</content><category term="articles"></category></entry><entry><title>Mockig a database cursor instance in Python</title><link href="/articles/2021/01/29/mockig-a-cursor-db/" rel="alternate"></link><published>2021-01-29T00:00:00-03:00</published><updated>2021-01-29T00:00:00-03:00</updated><author><name>nestornav</name></author><id>tag:None,2021-01-29:/articles/2021/01/29/mockig-a-cursor-db/</id><summary type="html">&lt;p&gt;I found an issue recently, when I tried to mock a function that has the following behavior.
There is a query to database to fetch several rows, the result is a cursor that will be iterated later. Hence each iteration will write a file with the result.
The designed test …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I found an issue recently, when I tried to mock a function that has the following behavior.
There is a query to database to fetch several rows, the result is a cursor that will be iterated later. Hence each iteration will write a file with the result.
The designed test assert if the function write or not the file.&lt;/p&gt;
&lt;p&gt;A code example about my first attemp:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;output_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tmp_path&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;output_csv.csv&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# The folling function retrive a db connection instance&lt;/span&gt;
&lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_connection_db&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;cur&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;return_value&lt;/span&gt;
&lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;return_value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Function to test&lt;/span&gt;
&lt;span class="n"&gt;process_query_result&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;csv_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;st_size&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The test aims to mock both a new database connection and the cursor. Later that the cursor will be iterated and after call &lt;code&gt;fetchone&lt;/code&gt; the result will be written as a line into the file.
In this case I used the property &lt;a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.return_value"&gt;return_value&lt;/a&gt; from mock. This property will return a list of integer each time that &lt;code&gt;cursor&lt;/code&gt; is consumed from &lt;code&gt;process_query_result&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The test step described before did not work also I needed to interrupt the execution due to the test never end. That situation happent because the function &lt;code&gt;process_query_result&lt;/code&gt; use a while statement over the cursor and never break the loop.&lt;/p&gt;
&lt;p&gt;With a little bit of debuging time, I found which was my mistake. The property &lt;code&gt;return_value&lt;/code&gt; returned the full list of integers each time that &lt;code&gt;fetch_one&lt;/code&gt; function of the cursor was called. So the loop never reaches the end in consequence the iterator never got an &lt;code&gt;StopIteration&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;What I was looking for from the very first time was the &lt;a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.side_effect"&gt;side_effect&lt;/a&gt; property. This one has more or less the following behave:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This can either be a function to be called when the mock is called, an iterable or an exception (class or instance) to be raised.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Eureka! what I needed! Something that mimics an iterable! From now &lt;code&gt;fetchone&lt;/code&gt; will not reutrn the full list. Finally I needed just tweak a single line as follow:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;side_effect&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;return_fav_list&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;So the test ran right this time. In a nutshell if you need mock an iterable instance inside a fuction, the best option will be use &lt;code&gt;side_effect&lt;/code&gt;.&lt;/p&gt;</content><category term="articles"></category></entry><entry><title>Mock de una intancia de un cursor de base de datos en Python</title><link href="/mockig-a-cursor-db-sp.html" rel="alternate"></link><published>2021-01-29T00:00:00-03:00</published><updated>2021-01-29T00:00:00-03:00</updated><author><name>nestornav</name></author><id>tag:None,2021-01-29:/mockig-a-cursor-db-sp.html</id><summary type="html">&lt;p&gt;Un problema que me encontré hace poco, fue tratar de mockear una función que presenta el siguiente compartamiento.
Realizar una consulta a una base de datos, el resultado es un cursor, el cual se itera con los registros que trajo. Cada iteración sobre este, se escriben los resultados en un …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Un problema que me encontré hace poco, fue tratar de mockear una función que presenta el siguiente compartamiento.
Realizar una consulta a una base de datos, el resultado es un cursor, el cual se itera con los registros que trajo. Cada iteración sobre este, se escriben los resultados en un archivo.
El test que diseñado, consistía en validar si está función escribía o no este.&lt;/p&gt;
&lt;p&gt;Un ejemplo en código de la primera aproximación del test:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;output_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tmp_path&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;output_csv.csv&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# The folling function retrive a db connection instance&lt;/span&gt;
&lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_connection_db&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;cur&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;return_value&lt;/span&gt;
&lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;return_value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Function to test&lt;/span&gt;
&lt;span class="n"&gt;process_query_result&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;csv_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;st_size&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;El test busca mockear una conexión a una base de datos, así como los valores que contrendrá el cursor para luego ser iterarados y escritos en el archivo.
Para esto, utilizo la propiedad &lt;a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.return_value"&gt;return_value&lt;/a&gt; de mock, la cual devolverá la lista de enteros cuando &lt;code&gt;cursor&lt;/code&gt; sea consumido desde &lt;code&gt;process_query_result&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Después de ejecutar el test descripto anteriormente, falló rotundamente y tuve que interrumpir la ejecución del test porque nunca terminaba. Esto dado a como está escrita la función &lt;code&gt;process_query_result&lt;/code&gt; (itera sando un while sobre cursor), se quedaba leyendo el cursor al infinito.&lt;/p&gt;
&lt;p&gt;Con un poco de debug, llegué a encontrar cuál era mi problema. La propiedad &lt;code&gt;return_value&lt;/code&gt; devolvía la lista completa de items, cada vez que se realiza una llamada la función &lt;code&gt;fetchone&lt;/code&gt; del cursor y no un valor por vez. Entonces núnca se llegaba al fin de lista lanzando un &lt;code&gt;StopIteration&lt;/code&gt;.
En este caso, la propiedad &lt;code&gt;return_value&lt;/code&gt; no era la solución para mi problema, así como el millón de cosas que probé buscando en muchas fuentes.&lt;/p&gt;
&lt;p&gt;Lo que necesitaba desde un principio fue haber usado &lt;a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.side_effect"&gt;side_effect&lt;/a&gt;, esta propiedad mas o menos se comporta de la siguiente forma:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This can either be a function to be called when the mock is called, an iterable or an exception (class or instance) to be raised.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Justo lo que necesitaba, algo que se comporte como un iterable!, y no que me devuelva un único valor por cada vez que se ejecutaba &lt;code&gt;fetchone&lt;/code&gt;. Entonces cambiando solo la línea siguiente:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;side_effect&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;return_fav_list9tt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Mi test funcionó correctamente. En resúmen, si se necesita mockear un iterable que es utilizado por otra función, la mejor opción será usar &lt;code&gt;side_effect&lt;/code&gt;.&lt;/p&gt;</content><category term="articles"></category></entry><entry><title>Nuevo post test</title><link href="/articles/2020/05/25/test/" rel="alternate"></link><published>2020-05-25T00:00:00-03:00</published><updated>2020-05-25T00:00:00-03:00</updated><author><name>nestornav</name></author><id>tag:None,2020-05-25:/articles/2020/05/25/test/</id><content type="html">&lt;p&gt;Como todo principio, hay un Hola Mundo!.&lt;/p&gt;</content><category term="articles"></category></entry></feed>